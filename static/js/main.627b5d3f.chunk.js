(this["webpackJsonpreact_people-table-advanced"]=this["webpackJsonpreact_people-table-advanced"]||[]).push([[0],{18:function(e,t,s){},20:function(e,t,s){},21:function(e,t,s){"use strict";s.r(t);var c=s(10),a=(s(6),s(7),s(4)),l=s(3),n=(s(18),s(5)),r=s.n(n);const i=e=>{let{isActive:t}=e;return r()("navbar-item",{"is-active":t})};var o=s(2);const j=()=>Object(o.jsx)("nav",{"data-cy":"nav",className:"navbar is-light is-fixed-top has-shadow",role:"navigation","aria-label":"main navigation",children:Object(o.jsx)("div",{className:"container",children:Object(o.jsxs)("div",{className:"navbar-brand",children:[Object(o.jsx)(a.c,{to:"/",className:i,children:"Home"}),Object(o.jsx)(a.c,{to:"/people",className:i,children:"People"})]})})}),d=()=>Object(o.jsxs)("div",{"data-cy":"app",children:[Object(o.jsx)(j,{}),Object(o.jsx)(l.b,{})]});var b=s(0);function h(e,t){const s=new URLSearchParams(e.toString());return Object.entries(t).forEach((e=>{let[t,c]=e;null===c?s.delete(t):Array.isArray(c)?(s.delete(t),c.forEach((e=>{s.append(t,e)}))):s.set(t,c)})),s.toString()}const x=()=>{const[e,t]=Object(a.d)(),s=e.get("query")||"",c=e.get("sex")||"",l=e.getAll("centuries")||[];return Object(o.jsxs)("nav",{className:"panel",children:[Object(o.jsx)("p",{className:"panel-heading",children:"Filters"}),Object(o.jsxs)("p",{className:"panel-tabs","data-cy":"SexFilter",children:[Object(o.jsx)(a.b,{className:"all"===c?"is-active":"",to:{search:h(e,{sex:null})},children:"All"}),Object(o.jsx)(a.b,{className:"m"===c?"is-active":"",to:{search:h(e,{sex:"m"})},children:"Male"}),Object(o.jsx)(a.b,{className:"f"===c?"is-active":"",to:{search:h(e,{sex:"f"})},children:"Female"})]}),Object(o.jsx)("div",{className:"panel-block",children:Object(o.jsxs)("p",{className:"control has-icons-left",children:[Object(o.jsx)("input",{"data-cy":"NameFilter",type:"search",className:"input",placeholder:"Search",value:s,onChange:function(s){!function(s){const c=h(e,s);t(c)}({query:s.target.value||null})}}),Object(o.jsx)("span",{className:"icon is-left",children:Object(o.jsx)("i",{className:"fas fa-search","aria-hidden":"true"})})]})}),Object(o.jsx)("div",{className:"panel-block",children:Object(o.jsxs)("div",{className:"level is-flex-grow-1 is-mobile","data-cy":"CenturyFilter",children:[Object(o.jsx)("div",{className:"level-left",children:[16,17,18,19,20].map((t=>Object(o.jsx)(a.b,{"data-cy":"century",className:r()("button mr-1",{"is-info":l.includes(t.toString())}),to:{search:h(e,{centuries:l.includes(t.toString())?l.filter((e=>+e!==t)):[...l,t.toString()]})},children:t},t)))}),Object(o.jsx)("div",{className:"level-right ml-4",children:Object(o.jsx)(a.b,{"data-cy":"centuryALL",className:"button is-success is-outlined",to:{search:h(e,{centuries:[]})},children:"All"})})]})}),Object(o.jsx)("div",{className:"panel-block",children:Object(o.jsx)("a",{className:"button is-link is-outlined is-fullwidth",href:"#/people",children:"Reset all filters"})})]})};s(20);const m=()=>Object(o.jsx)("div",{className:"Loader","data-cy":"loader",children:Object(o.jsx)("div",{className:"Loader__content"})}),O=e=>{let{person:t}=e;if(!t)return null;const{name:s,sex:c}=t,l="f"===c?"has-text-danger":"";return Object(o.jsx)(a.b,{to:"".concat(null===t||void 0===t?void 0:t.slug),className:l,children:s})};let u=function(e){return e.Name="name",e.Sex="sex",e.Born="born",e.Died="died",e}({});const p=e=>{let{people:t}=e;const{slug:s}=Object(l.s)();function c(e){return t.find((t=>t.name===e))}const[n]=Object(a.d)(),i=n.get("sort"),j=n.get("order"),d=((e,t,s)=>{const c=s?-1:1;return[...e].sort(((e,s)=>{switch(t){case"name":case"sex":return e[t].localeCompare(s[t])*c;case"born":case"died":return(+e[t]-+s[t])*c;default:return 0}}))})(t,i,j);return Object(o.jsxs)("table",{"data-cy":"peopleTable",className:"table is-striped is-hoverable is-narrow is-fullwidth",children:[Object(o.jsx)("thead",{children:Object(o.jsxs)("tr",{children:[Object.keys(u).map((e=>{return Object(o.jsx)("th",{children:Object(o.jsxs)("span",{className:"is-flex is-flex-wrap-nowrap",children:[e,Object(o.jsx)(a.b,{to:{search:h(n,(t=e.toLowerCase(),i!==t?{sort:t,order:null}:j?{sort:null,order:null}:{sort:t,order:"desc"}))},"aria-label":"Sort by ".concat(e),children:Object(o.jsx)("span",{className:"icon",children:Object(o.jsx)("i",{className:r()("fas fa-sort",{"fa-sort-up":i===e.toLowerCase()&&!j,"fa-sort-down":i===e.toLowerCase()&&j})})})})]})},e);var t})),Object(o.jsx)("th",{children:"Mother"}),Object(o.jsx)("th",{children:"Father"})]})}),Object(o.jsx)("tbody",{children:d.map((e=>{const t=c(e.fatherName),a=c(e.motherName);return Object(o.jsxs)("tr",{"data-cy":"person",className:r()({"has-background-warning":e.slug===s}),"aria-describedby":"person-".concat(e.slug,"-label"),children:[Object(o.jsx)("td",{children:Object(o.jsx)(O,{person:e,"aria-label":"Details for ".concat(e.name)})}),Object(o.jsx)("td",{children:e.sex}),Object(o.jsx)("td",{children:e.born}),Object(o.jsx)("td",{children:e.died}),Object(o.jsx)("td",{children:a?Object(o.jsx)(O,{person:a}):e.motherName||"-"}),Object(o.jsx)("td",{children:t?Object(o.jsx)(O,{person:t}):e.fatherName||"-"})]},e.slug)}))})]})};async function v(){return(e=500,new Promise((t=>setTimeout(t,e)))).then((()=>fetch("https://mate-academy.github.io/react_people-table/api/people.json"))).then((e=>e.json()));var e}const N=()=>{const[e,t]=Object(b.useState)([]),[s,c]=Object(b.useState)(!0),[l,n]=Object(b.useState)(!1),[r]=Object(a.d)(),i=function(e,t,s,c){let a=[...e];return s&&(a=a.filter((e=>e.sex===s))),c.length&&(a=a.filter((e=>c.includes(Math.ceil(e.born/100).toString())))),t&&(a=a.filter((e=>{var s,c;return e.name.toLowerCase().includes(t.toLowerCase())||(null===(s=e.motherName)||void 0===s?void 0:s.toLowerCase().includes(t.toLowerCase()))||(null===(c=e.fatherName)||void 0===c?void 0:c.toLowerCase().includes(t.toLowerCase()))}))),a}(e,r.get("query")||"",r.get("sex")||"",r.getAll("centuries")||[]);return Object(b.useEffect)((()=>{v().then((e=>t(e))).catch((()=>n(!0))).finally((()=>c(!1)))}),[]),Object(o.jsx)(o.Fragment,{children:Object(o.jsxs)("div",{className:"section",children:[Object(o.jsx)("h1",{className:"title mx-5",children:"People Page"}),Object(o.jsx)("div",{className:"block",children:s?Object(o.jsx)(m,{}):Object(o.jsxs)("div",{className:"columns is-desktop is-flex-direction-row-reverse",children:[Object(o.jsx)("div",{className:"column is-7-tablet is-narrow-desktop",children:Object(o.jsx)(x,{})}),Object(o.jsx)("div",{className:"column",children:Object(o.jsxs)("div",{className:"box table-container",children:[l&&Object(o.jsx)("p",{"data-cy":"peopleLoadingError",className:"has-text-danger",children:"Something went wrong"}),!i.length&&!s&&Object(o.jsx)("p",{"data-cy":"noPeopleMessage",children:"There are no people on the server"}),Object(o.jsx)(p,{people:i})]})})]})})]})})},f=()=>Object(o.jsx)("div",{className:"section",children:Object(o.jsx)("h1",{className:"title mx-5",children:"Home page"})}),g=()=>Object(o.jsx)(a.a,{children:Object(o.jsx)(l.e,{children:Object(o.jsxs)(l.c,{path:"/",element:Object(o.jsx)(d,{}),children:[Object(o.jsx)(l.c,{index:!0,element:Object(o.jsx)(f,{})}),Object(o.jsx)(l.c,{path:"people",element:Object(o.jsx)(N,{}),children:Object(o.jsx)(l.c,{path:":slug",element:Object(o.jsx)(N,{})})}),Object(o.jsx)(l.c,{path:"/home",element:Object(o.jsx)(l.a,{to:"/",replace:!0})}),Object(o.jsx)(l.c,{path:"*",element:Object(o.jsx)("h1",{className:"title",children:"Page not found"})})]})})});Object(c.createRoot)(document.getElementById("root")).render(Object(o.jsx)(g,{}))}},[[21,1,2]]]);
//# sourceMappingURL=main.627b5d3f.chunk.js.map